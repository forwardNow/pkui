define(function(a){"use strict";var b=a("jquery"),c={},d=window.layer;return a("../config/systemUrl"),c.opts={url:"{% system.menu.sysMenuListData %}"},c.originData=null,c.originSet=null,c.init=function(a){return this.opts=b.extend(!0,{},this.opts,a),this._getData(),this},c._getData=function(){var a=this;b.ajax({url:this.opts.url,async:!1}).done(function(b){if(b&&(b.success||b.totalRecords>=0)){if(!b.data||0===b.data.length)return void console.error("菜单数据为空。");a.originData=b.data}else d.alert("请求菜单数据失败：服务器内部错误。",{icon:0})}).fail(function(){d.alert("请求菜单数据失败。",{icon:0})})},c.getList=function(a){var c;return c=[],this.originData||this._getData(),b.each(this.originData,function(d,e){var f=b.extend(!0,{},e);a?c.push(f):"1"!==e.visiable&&1!==e.visiable||c.push(f)}),c},c.getSet=function(a){var c;return c={},this.originData||this._getData(),b.each(this.originData,function(d,e){var f=b.extend(!0,{},e),g=f.menuId;a?c[g]=f:"1"!==e.visiable&&1!==e.visiable||(c[g]=f)}),c},c.getSysMenuById=function(a,c){var d;return this.originSet||(this.originSet=this.getSet(!0)),d=this.originSet[a],d?c?b.extend(!0,{},d):d:null},c.getSysMenuNameById=function(a){var b=this.getSysMenuById(a);return b?b.menuName||"":""},c.init(),PKUI.MenuSource=c,c});