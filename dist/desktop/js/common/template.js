define(function(a){var b,c,d;return b=a("jquery"),c=a("artTemplate"),d={_renderCache:{},setOptions:function(a){return this.options=b.extend({},this.defaults,a),this},getHtmlString:function(a,d){var e,f,g;return g=null,f=this._renderCache,f[a]?f[a](d):(e=this._getTemplateUrl(a),b.ajax({async:!1,type:"GET",cache:!1,dataType:"text",url:e}).done(function(a){g=a}).fail(function(a,b){throw console.info(b),"获取模板失败"}),f[a]=c.compile(g),f[a](d))},get:function(a,b,d){var e,f,g;return g=this,f=this._renderCache,e={tplRender:!1,data:!1,update:function(){var a;this.tplRender&&this.data&&(a=this.tplRender(this.data),d(a))}},f[a]?(e.tplRender=f[a],e.update()):this._ajax({url:g._getTemplateUrl(a),dataType:"text"}).done(function(b){e.tplRender=c.compile(b),f[a]=e.tplRender,e.update()}).fail(function(a,b){throw"/(ㄒoㄒ)/~~[ "+b+" ]模板获取失败！"}),"object"==typeof b?(e.data=b,void e.update()):void this._ajax({url:b}).done(function(a){if(a=window.PKUI.responseDataHandler(a),!a)throw"/(ㄒoㄒ)/~~数据获取失败！";e.data=a,e.update()}).fail(function(a,b){throw"/(ㄒoㄒ)/~~[ "+b+" ]数据获取失败！"})},_getTemplateUrl:function(a){return/http:|https:|(^\/)/.test(a)?a:/\.(html|tpl|txt|json|js)/.test(a)?void 0:this.options.base+a+this.options.extName},_ajax:function(a){var c;return c=b.extend({type:"GET",cache:!1,dataType:"json"},a),b.ajax(c)}},d.defaults={base:"",extName:".html"},d});